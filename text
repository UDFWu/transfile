stage('SFTP RemoteHost'){
			steps{
				echo 'SFTP RemoteHost'
				echo '------------------------------' 
                script{
    				echo 'Test Connection'     
    				def host = '10.10.32.10'
    				def port = '22'
    				def timeout = '10'
    				echo '------------------------------'
        			
        			withCredentials([usernamePassword(credentialsId: 'south_gitlab_server', usernameVariable: 'SSH_USER', passwordVariable: 'SSH_PASS')]) {
        				dir("./SCSB_Automated_Test_Server/target"){
        					sh """
        					timeout ${timeout} ssh -v -o ConnectTimeout=${timeout} -o StrictHostKeyChecking=no ${SSH_USER}@${host} -p ${port} echo "Connection Successful"
        					"""
				            echo 'SFTP'
        					echo '------------------------------'
        				    sh """
        				    sftp -P ${port} -oStrictHostKeyChecking=no ${SSH_USER}@${host} <<< 'put ./target/atms.war /home/itdc/atms_test '
        				    """
        		        }
                    }
    				
				}
				echo '------------------------------'
			}
		}



SFTP RemoteHost
[Pipeline] echo
------------------------------
[Pipeline] script
[Pipeline] {
[Pipeline] echo
Test Connection
[Pipeline] echo
------------------------------
[Pipeline] withCredentials
Masking supported pattern matches of $SSH_PASS
[Pipeline] {
[Pipeline] dir
Running in /datam/jenkins/workspace/AutoTest/SCSB_Automated_Test_Server/SCSB_Automated_Test_Server/target
[Pipeline] {
[Pipeline] sh
+ timeout 10 ssh -v -o ConnectTimeout=10 -o StrictHostKeyChecking=no itdc@10.10.32.10 -p 22 echo 'Connection Successful'
OpenSSH_8.0p1, OpenSSL 1.1.1k  FIPS 25 Mar 2021
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf
debug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config
debug1: configuration requests final Match pass
debug1: re-parsing configuration
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf
debug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config
debug1: Connecting to 10.10.32.10 [10.10.32.10] port 22.
debug1: fd 3 clearing O_NONBLOCK
debug1: Connection established.
debug1: identity file /var/lib/jenkins/.ssh/id_rsa type 0
debug1: identity file /var/lib/jenkins/.ssh/id_rsa-cert type -1
debug1: identity file /var/lib/jenkins/.ssh/id_dsa type -1
debug1: identity file /var/lib/jenkins/.ssh/id_dsa-cert type -1
debug1: identity file /var/lib/jenkins/.ssh/id_ecdsa type -1
debug1: identity file /var/lib/jenkins/.ssh/id_ecdsa-cert type -1
debug1: identity file /var/lib/jenkins/.ssh/id_ed25519 type -1
debug1: identity file /var/lib/jenkins/.ssh/id_ed25519-cert type -1
debug1: identity file /var/lib/jenkins/.ssh/id_xmss type -1
debug1: identity file /var/lib/jenkins/.ssh/id_xmss-cert type -1
debug1: Local version string SSH-2.0-OpenSSH_8.0
debug1: Remote protocol version 2.0, remote software version OpenSSH_8.9p1 Ubuntu-3ubuntu0.10
debug1: match: OpenSSH_8.9p1 Ubuntu-3ubuntu0.10 pat OpenSSH* compat 0x04000000
debug1: Authenticating to 10.10.32.10:22 as 'itdc'
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: algorithm: curve25519-sha256
debug1: kex: host key algorithm: ecdsa-sha2-nistp256
debug1: kex: server->client cipher: aes256-gcm@openssh.com MAC: <implicit> compression: none
debug1: kex: client->server cipher: aes256-gcm@openssh.com MAC: <implicit> compression: none
debug1: kex: curve25519-sha256 need=32 dh_need=32
debug1: kex: curve25519-sha256 need=32 dh_need=32
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ecdsa-sha2-nistp256 SHA256:IRUDcVKlQYTcKlxD8jdt/6P50dd+Vq/w+K2RmnoSAvQ
debug1: Host '10.10.32.10' is known and matches the ECDSA host key.
debug1: Found key in /var/lib/jenkins/.ssh/known_hosts:16
debug1: resetting send seqnr 3
debug1: rekey out after 4294967296 blocks
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: resetting read seqnr 3
debug1: SSH2_MSG_NEWKEYS received
debug1: rekey in after 4294967296 blocks
debug1: Will attempt key: /var/lib/jenkins/.ssh/id_rsa RSA SHA256:t+h9Rlm34btAQuUxyDuvWBW6bVRIClaDrZU5XhkVYCM
debug1: Will attempt key: /var/lib/jenkins/.ssh/id_dsa 
debug1: Will attempt key: /var/lib/jenkins/.ssh/id_ecdsa 
debug1: Will attempt key: /var/lib/jenkins/.ssh/id_ed25519 
debug1: Will attempt key: /var/lib/jenkins/.ssh/id_xmss 
debug1: SSH2_MSG_EXT_INFO received
debug1: kex_input_ext_info: server-sig-algs=<ssh-ed25519,sk-ssh-ed25519@openssh.com,ssh-rsa,rsa-sha2-256,rsa-sha2-512,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,webauthn-sk-ecdsa-sha2-nistp256@openssh.com>
debug1: kex_input_ext_info: publickey-hostbound@openssh.com (unrecognised)
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering public key: /var/lib/jenkins/.ssh/id_rsa RSA SHA256:t+h9Rlm34btAQuUxyDuvWBW6bVRIClaDrZU5XhkVYCM
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /var/lib/jenkins/.ssh/id_dsa
debug1: Trying private key: /var/lib/jenkins/.ssh/id_ecdsa
debug1: Trying private key: /var/lib/jenkins/.ssh/id_ed25519
debug1: Trying private key: /var/lib/jenkins/.ssh/id_xmss
debug1: Next authentication method: password
debug1: read_passphrase: can't open /dev/tty: No such device or address
debug1: Authentications that can continue: publickey,password
Permission denied, please try again.
debug1: read_passphrase: can't open /dev/tty: No such device or address
debug1: Authentications that can continue: publickey,password
Permission denied, please try again.
debug1: read_passphrase: can't open /dev/tty: No such device or address
debug1: Authentications that can continue: publickey,password
debug1: No more authentication methods to try.
itdc@10.10.32.10: Permission denied (publickey,password).
