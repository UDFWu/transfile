stage('Checkmarx Scan') {
            steps {
                script {
                    def checkmarxScanConfig = [
                        projectName: 'atms',
                        teamId: '1',
                        groupId: '1',
                        preset: '36',
                        incremental: true,
                        generatePdfReport: true,
                        sastEnabled: true,
                        osaEnabled: false,
                        vulnerabilityThresholdEnabled: false,
                        dependencyScanConfig: [
                            scaEnabled: false,
                            osaEnabled: false
                        ]
                    ]
                    
                    step([$class: 'CxScanBuilder', 
                        comment: 'Jenkins Scan',
                        failBuildOnNewResults: false,
                        failBuildOnNewSeverity: 'HIGH',
                        vulnerabilityThresholdResult: 'FAILURE',
                        waitForResultsEnabled: true,
                        avoidDuplicateProjectScans: true,
                        *:checkmarxScanConfig
                    ])
                }
            }
        }