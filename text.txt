stage('Nexus Evaluate') { 
            steps {
                nexusPolicyEvaluation (
                    advancedProperties: '', //預設空白
                    enableDebugLogging: true, //是否開啟Debug log
                    failBuildOnNetworkError: true, //如果連不上IQ Server 是否中斷 build
                    iqApplication: 'unlts', //指定哪一個 IQ Server application 做掃描 (Gitlab Project Name)
                    iqInstanceId: 'sonatype-dev', //Jenkins server 的 IQ server 使用者
                    iqScanPatterns: [[scanPattern: '**/target/*.jar'], [scanPattern: '**/target/*.war']], //要掃描的檔案路徑(這裡指掃描所有Target下面的 Jar file)
                    iqStage: 'build',
                    jobCredentialsId: 'sonatype-lifecycle-scan' 
                )
            }
            post {
                failure {
                    echo '偵測到違規中高風險檔案，中斷 pipeline 執行，請至 Build# Log 中查看掃描報告。'
                }
                success {
                    echo '掃描成功，沒有偵測到違規風險檔案。'
                }
            }
        } 